
<main class="container">
  <mat-card>
    <mat-card-title>Membership creates</mat-card-title>
    <mat-card-subtitle>
      <mat-label class="mat-small">
        {{ 'please fill out the form to create membership' }}
      </mat-label>
    </mat-card-subtitle>
    <mat-card-content style="width: 400px;height: 30vh; overflow: auto;">
      <mat-list class="padding-top-0">
        <mat-list-item *ngFor="let item of listMemberShips; let index = index">
          {{item.id_au}}
          <div class="list-item-content">
            <mat-icon>card_membership</mat-icon>
            <div class="item-option" style="margin-left:10px">
              <mat-label class="mat-h3 margin-0">
                {{item.name}}
          

              </mat-label>    
            </div>
            <div class="actions-option">
              <button mat-icon-button (click)="editMembership($event, index )">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button (click)="deleteMembership(item.id_document)">
                <mat-icon>delete</mat-icon>
              </button>
              <mat-checkbox [disabled]="false" color="primary"></mat-checkbox>
            </div>
          </div>
          <mat-divider></mat-divider>
        </mat-list-item>
      </mat-list>
    </mat-card-content>

    <mat-card-actions align="center">
    
      <button mat-raised-button color="primary">
        apply
      </button>
    </mat-card-actions>

  </mat-card>

  <mat-card style="width: 400px">
    <mat-card-title>Create membership</mat-card-title>
    <mat-card-subtitle>
      <mat-label class="mat-small">
        {{ 'please fill out the form to create membership' }}
      </mat-label>
    </mat-card-subtitle>
    <mat-card-content>
      <form [formGroup]="form">
        <div style="display: flex; flex-direction: column; gap: 20px">
          <mat-form-field appearance="fill">
            <mat-label>name</mat-label>
            <input matInput formControlName="name"/>
            <mat-error>
              <ng-container *ngIf="form.get('name').hasError('required')">
                  {{ "this field is required" }}
              </ng-container>
            </mat-error>

              <mat-error *ngIf="form.getError('nameExist')">
                {{ "the name membership already exist" }}
              </mat-error>

            <!-- <mat-hint> </mat-hint>  -->

          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>initial Membership Leverage</mat-label>
            <input matInput formControlName="initialMembershipLeverage" mask="separator" thousandSeparator="."/>
            <mat-error>
              <ng-container>{{ "error" }}</ng-container>
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>percent rewards</mat-label>
            <input matInput formControlName="percentRewards" type="text" [dropSpecialCharacters]="false" mask="percent" suffix=" %"  maxlength="8">

            <mat-error>
              <ng-container>{{ "error" }}</ng-container>
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>minimum balance rebuy</mat-label>
            <input matInput formControlName="minimumBalanceRebuy" mask="separator" thousandSeparator="." />
            <mat-error>
              <ng-container>{{ "error" }}</ng-container>
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>total days</mat-label>
            <input matInput formControlName="totalDays" mask="separator" thousandSeparator="." />
            <mat-error>
              <ng-container>{{ "error" }}</ng-container>
            </mat-error>
          </mat-form-field>
        </div>
      </form>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-raised-button color="warn" *ngIf="isEdit" (click)="cancel()">
        cancel
      </button>
      <button mat-raised-button color="primary"  (click)="createMembership()" *ngIf="!isEdit">
        save
      </button>
      <button mat-raised-button color="primary" *ngIf="isEdit" (click)="updateMembershipFirebase()" >
        update
      </button>
    </mat-card-actions>
  </mat-card>
</main>